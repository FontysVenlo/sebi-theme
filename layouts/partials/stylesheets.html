{{ $options := (dict "includePaths" (slice "node_modules")) }}

{{ $css := resources.Get "css/main.css" }}
{{ $style := $css | resources.PostCSS (dict "config" "./postcss.config.js")}}

{{ $highlight := resources.Get "css/highlight.scss" | toCSS $options }}
{{ if eq (hugo.Environment) "development" -}}
    <link rel="stylesheet" href="{{ $highlight.Permalink }}">
    <link rel="stylesheet" href="{{ $style.Permalink }}">
{{ else -}}
    {{ $secureStyle := $css | resources.Fingerprint "sha512" -}}
    <link rel="stylesheet" href="{{ $secureStyle.Permalink }}" integrity="{{ $secureStyle.Data.Integrity }}" crossorigin="anonymous">
{{ end -}}